# -*- coding: utf-8 -*-
"""
Created on Fri Nov 25 16:49:19 2016

@author: cheungcecilia
"""

import networkx as nx
import pandas as pd
import numpy as np
import operator

# read text file into numpy array

data = np.loadtxt('/Users/cheungcecilia/Desktop/Network Analytics/Homework/Homework 2/HW2_problem 2.txt')

#adjacency matrix
sdata = data[0:34, : ]

#where there is a 1 signifies a an arrow from node in row index to node in column index

graph = nx.from_numpy_matrix(sdata)


#part 2

#betweenness centrality

betweennessgraph = nx.betweenness_centrality(graph)
sorted_graph_betweenness = sorted(betweennessgraph.items(), key=operator.itemgetter(1), reverse = True)
#betweenness captures the number of connections between the people 
#node 1 and node 34 are the most important people in the organization  
#most important in terms of able to connect different people in the organisation

#flow
flowgraph = nx.current_flow_betweenness_centrality(graph)
sorted_graph_flow_betweenness = sorted(flowgraph.items(), key=operator.itemgetter(1), reverse = True)

#flow doesn't take into account the shortest path, considers all other paths
#node 1 and 34 are again the people who are able to connect different people, even if not the shorrtest path
#very central in the organisation

#eigenvalue
eigengraph = nx.eigenvector_centrality(graph)
sorted_graph_eigenvalue = sorted(eigengraph.items(), key=operator.itemgetter(1), reverse = True)

#eigenvalue refers to importance and in this context, can be interpreted as influence
#node 34 is probably CEO, followed by node 1 because these two people are reported to by also very important ppl with connections to others in the organization


#closeness
closegraph = nx.closeness_centrality(graph)
sorted_graph_close = sorted(closegraph.items(), key=operator.itemgetter(1), reverse = True)

#sum of shortest distance to all other nodes
#node 1 and 3 have the shortest distance to all the others in the organiization - so most connected

#degree 
degreegraph = nx.degree_centrality(graph)
sorted_degree = sorted(degreegraph.items(), key=operator.itemgetter(1), reverse = True)

#node 34 and 1 have the most direct connections with others in the organization


#dispersion
nx.dispersion(graph)


#part 3
from mpl_toolkits.basemap import Basemap
import matplotlib.pyplot as plt
import numpy as np

#create map
map = Basemap(projection='merc', lat_0 = 11.75, lon_0 = 42.5,
    resolution = 'h', area_thresh = 0.1,
    llcrnrlon=41.7, llcrnrlat=10.9,
    urcrnrlon=43.5, urcrnrlat=12.7)

map.drawcoastlines()
map.drawcountries()
map.fillcontinents(color = 'coral')
map.drawmapboundary()

#read coordinates
djibouti = pd.read_csv('/Users/cheungcecilia/Desktop/Network Analytics/Homework/Homework 2/HW2_tsp.txt', skiprows = 10, sep=" ", header = None)
labels = list(djibouti.iloc[ : ,0])

#relabel coordinates
lats = list(djibouti.iloc[ : ,1]/1000)
long = list(djibouti.iloc[ : ,2]/1000)

x,y = map(long, lats)
map.plot(x, y, 'bo', markersize=4)

for label, xpt, ypt in zip(labels, x, y):
    plt.text(xpt+5000, ypt, label)

plt.show()

#part 3b

import math

def haversine(angle):
  h = math.sin(angle / 2) ** 2
  return h

def distance(lat1, long1, lat2, long2):
    # Note: The formula used in this function is not exact, as it assumes
    # the Earth is a perfect sphere.

    # Mean radius of Earth in km
    radius_earth = 6371

    # Convert latitude and longitude to
    # spherical coordinates in radians.
    degrees_to_radians = math.pi/180.0
    phi1 = lat1 * degrees_to_radians
    phi2 = lat2 * degrees_to_radians
    lambda1 = long1 * degrees_to_radians
    lambda2 = long2 * degrees_to_radians
    dphi = phi2 - phi1
    dlambda = lambda2 - lambda1

    a = haversine(dphi) + math.cos(phi1) * math.cos(phi2) * haversine(dlambda)
    c = 2 * math.atan2(math.sqrt(a), math.sqrt(1-a))
    d = radius_earth * c
    return d

#create empty numpy matrix

distancecity = np.zeros([len(djibouti.index), len(djibouti.index)])

#fill in matrix with distances

for i in range(0, len(djibouti.index)):
    for j in range(0, len(djibouti.index)):
        a = distance(djibouti.iloc[i, 1]/1000, djibouti.iloc[i, 2]/1000, djibouti.iloc[j, 1]/1000, djibouti.iloc[j, 2]/1000)
        distancecity[i,j] = a

#print whole matrix

np.set_printoptions(threshold=np.inf)

#import ortools

import ortools

from ortools.constraint_solver import pywrapcp
from ortools.constraint_solver import routing_enums_pb2

# Distance callback
class CreateDistanceCallback(object):
  """Create callback to calculate distances between points."""
  def __init__(self):
    """Array of distances between points."""

    self.matrix = [
       [    0.        ,   31.83522548,   86.6908608 ,   68.68293569,
          92.83461491,   88.19069363,   96.44361569,  106.4893666 ,
         108.5020945 ,   48.59050739,  135.37647207,  129.87186822,
          99.11546055,   56.46390798,   99.13659132,  129.13417226,
         131.15543491,  131.6121531 ,  132.07326204,   99.45133387,
          84.35213741,  113.71757942,  104.18521644,  121.73505504,
         110.32553571,  111.77223801,  167.75441325,  147.47559338,
         117.71714759,  133.79900032,  197.44677426,  148.58593968,
         189.14944854,  191.99095554,  166.05420799,  204.0887048 ,
         179.77386272,  205.65378412],
       [  31.83522548,    0.        ,   55.92427526,   37.31467995,
          61.59695089,   56.35606572,   64.61252139,   74.76995587,
          76.77974597,   50.36551929,  103.54386448,   98.0919221 ,
          68.40198016,   53.44691325,   68.69965596,   97.68091426,
          99.72842055,  100.24109796,  100.71953764,   73.14113302,
          89.41330995,   86.07889099,   79.57048045,   93.5805984 ,
          85.86642849,   87.8410854 ,  137.8427446 ,  119.53439991,
         107.37607552,  116.28420198,  169.09262088,  132.63441559,
         162.7601394 ,  165.35837769,  145.29149536,  176.45743266,
         156.65956475,  182.86683277],
       [  86.6908608 ,   55.92427526,    0.        ,   19.07511401,
           7.60019763,   18.59550134,   20.24213543,   33.25093585,
          34.63486688,   96.51069974,   54.12336299,   51.12574593,
          41.24601203,   94.81214578,   43.50642535,   55.67219343,
          57.73329398,   58.75750201,   59.34630557,   65.65311774,
         131.47256659,   69.13295113,   75.27209086,   72.49307887,
          80.07486025,   83.0601804 ,  102.25529934,   94.61516916,
         127.40654391,  121.42282543,  138.09499842,  138.76734543,
         139.09017374,  140.69971226,  139.12212327,  147.68288928,
         143.26004683,  168.35907107],
       [  68.68293569,   37.31467995,   19.07511401,    0.        ,
          24.28370961,   22.00189421,   29.23643582,   41.3930589 ,
          43.27977574,   78.05188384,   67.99001464,   63.42919827,
          41.62940075,   77.00607621,   43.1156639 ,   65.21816707,
          67.33703421,   68.11040323,   68.65688951,   59.52503559,
         114.01992664,   67.1177613 ,   68.64106641,   72.45573799,
          74.28181412,   77.05619596,  109.64590354,   97.08086451,
         115.07003684,  113.40975548,  143.94704773,  130.8055413 ,
         141.91410736,  143.94571444,  135.31810846,  152.70517971,
         142.15754477,  168.00204059],
       [  92.83461491,   61.59695089,    7.60019763,   24.28370961,
           0.        ,   15.40395205,   14.12195458,   26.51211768,
          27.72666797,   99.6462372 ,   46.55229053,   43.53787556,
          36.55579471,   97.25466769,   38.97758205,   48.31767151,
          50.35982423,   51.41211677,   52.00357068,   62.47988599,
         133.43405849,   64.4496592 ,   72.10955557,   67.14484592,
          76.52776463,   79.55072274,   95.03338702,   88.39277321,
         126.18753845,  118.34050307,  131.04257889,  135.57497646,
         132.61775134,  134.13276468,  134.44856291,  140.75702041,
         137.75776952,  162.58817289],
       [  88.19069363,   56.35606572,   18.59550134,   22.00189421,
          15.40395205,    0.        ,    8.4197418 ,   19.40194895,
          21.31028906,   88.18831943,   47.1908275 ,   41.97480408,
          22.85772257,   84.81916216,   25.01878385,   43.21992128,
          45.33822935,   46.10857045,   46.65546451,   47.32874276,
         120.20178016,   50.61690344,   56.96552439,   54.34421893,
          61.60233678,   64.60382889,   88.00263316,   77.43933692,
         110.84998219,  103.19137716,  122.85336169,  120.48246491,
         122.21588941,  124.02300903,  120.55921905,  131.95482044,
         125.08604574,  150.40263725],
       [  96.44361569,   64.61252139,   20.24213543,   29.23643582,
          14.12195458,    8.4197418 ,    0.        ,   13.20828729,
          14.80603165,   96.1420689 ,   39.03255812,   34.19610183,
          22.90961137,   92.45571897,   25.42371988,   36.61321397,
          38.72523139,   39.62243859,   40.19430593,   49.87796523,
         127.37651101,   50.59436298,   59.41637193,   53.04462313,
          63.43718519,   66.47550109,   82.5552698 ,   74.4456678 ,
         115.34732739,  105.48927007,  118.08944795,  122.58543772,
         118.85498883,  120.45758352,  120.50425374,  127.55630618,
         123.63581541,  148.49109442],
       [ 106.4893666 ,   74.76995587,   33.25093585,   41.3930589 ,
          26.51211768,   19.40194895,   13.20828729,    0.        ,
           2.01388615,  100.96612706,   29.77868379,   23.50342371,
          16.94179479,   96.14499134,   19.36910676,   23.82758208,
          25.94714561,   26.74616155,   27.30128313,   44.40779827,
         129.32623646,   41.4902106 ,   53.37631332,   42.37937089,
          56.36628867,   59.37106569,   69.35665621,   62.04271827,
         111.56349863,   98.34038647,  104.90612869,  115.02078697,
         106.11462464,  107.62069245,  110.35549148,  114.43461805,
         112.15820868,  136.58876053],
       [ 108.5020945 ,   76.77974597,   34.63486688,   43.27977574,
          27.72666797,   21.31028906,   14.80603165,    2.01388615,
           0.        ,  102.7954074 ,   27.82818735,   21.49621123,
          18.08820526,   97.89632789,   20.42691877,   21.97313198,
          24.093063  ,   24.92548886,   25.48741975,   45.2380443 ,
         130.90783135,   41.63726543,   54.0660725 ,   42.11871642,
          56.86088176,   59.84850003,   67.77419863,   61.12930162,
         112.4815114 ,   98.72706523,  103.46250712,  115.31127062,
         105.01040416,  106.46404436,  110.09405402,  113.0711412 ,
         111.53127784,  135.81297239],
       [  48.59050739,   50.36551929,   96.51069974,   78.05188384,
          99.6462372 ,   88.18831943,   96.1420689 ,  100.96612706,
         102.7954074 ,    0.        ,  130.31864131,  123.25622754,
          87.26453171,    9.73118533,   86.01863248,  118.51751243,
         120.15397222,  120.12285122,  120.41316509,   74.08395134,
          39.14428118,   89.51371453,   74.5561186 ,   98.01194517,
          79.58710969,   79.88623824,  146.41764562,  121.0965628 ,
          70.56652697,   91.35127881,  169.89704376,  104.18804109,
         157.19822672,  160.46020936,  125.94500799,  174.46488832,
         142.38579851,  167.11610006],
       [ 135.37647207,  103.54386448,   54.12336299,   67.99001464,
          46.55229053,   47.1908275 ,   39.03255812,   29.77868379,
          27.82818735,  130.31864131,    0.        ,    7.64341518,
          43.56578144,  125.04462588,   45.27961114,   17.46879484,
          17.60959443,   18.75702829,   19.07611386,   66.73746517,
         156.89261175,   57.61347077,   73.92151955,   53.93195165,
          74.80504039,   77.46078555,   55.9650401 ,   62.04494672,
         132.87461079,  113.92421925,   92.5069948 ,  129.04124298,
         100.03977288,  100.56096738,  117.24257057,  103.30249541,
         113.6588579 ,  135.10408137],
       [ 129.87186822,   98.0919221 ,   51.12574593,   63.42919827,
          43.53787556,   41.97480408,   34.19610183,   23.50342371,
          21.49621123,  123.25622754,    7.64341518,    0.        ,
          36.22257823,  117.80606151,   37.84214155,   10.83287422,
          11.60407078,   12.89607245,   13.35614357,   59.09782513,
         149.3785005 ,   50.20381172,   66.34047296,   46.88400524,
          67.3395152 ,   70.02957127,   54.27441049,   56.97480632,
         125.33671444,  106.84679108,   90.9733208 ,  122.18901147,
          96.82858971,   97.60465622,  111.4116417 ,  101.47573441,
         108.81899233,  131.00533255],
       [  99.11546055,   68.40198016,   41.24601203,   41.62940075,
          36.55579471,   22.85772257,   22.90961137,   16.94179479,
          18.08820526,   87.26453171,   43.56578144,   36.22257823,
           0.        ,   81.60406788,    2.57928245,   31.53319629,
          33.32649576,   33.49473823,   33.86907914,   27.78473315,
         113.50100279,   27.93874453,   37.05811805,   31.54202507,
          40.68523271,   43.72427758,   69.72824286,   55.47233977,
          94.70652933,   82.80390537,  102.76494006,   99.80215793,
         100.3235751 ,  102.32295325,   97.96736316,  111.23849364,
         102.23881742,  127.62561148],
       [  56.46390798,   53.44691325,   94.81214578,   77.00607621,
          97.25466769,   84.81916216,   92.45571897,   96.14499134,
          97.89632789,    9.73118533,  125.04462588,  117.80606151,
          81.60406788,    0.        ,   80.15232482,  112.4310806 ,
         113.97649861,  113.86141183,  114.11817883,   66.27123447,
          37.19417729,   81.59237767,   66.02170318,   90.04082724,
          70.8116644 ,   70.94834831,  138.35692476,  112.52059513,
          61.58705097,   81.63919051,  160.96537637,   94.63001086,
         147.86933606,  151.16099456,  116.21524863,  165.31073918,
         132.7185704 ,  157.40000951],
       [  99.13659132,   68.69965596,   43.50642535,   43.1156639 ,
          38.97758205,   25.01878385,   25.42371988,   19.36910676,
          20.42691877,   86.01863248,   45.27961114,   37.84214155,
           2.57928245,   80.15232482,    0.        ,   32.53500348,
          34.24128482,   34.31559023,   34.65573069,   25.2271242 ,
         111.64690274,   25.62689902,   34.48125989,   29.61436246,
          38.11729588,   41.15666683,   69.19589554,   53.99105616,
          92.21713012,   80.23300041,  101.75198575,   97.24224624,
          98.80402823,  100.86710442,   95.63790049,  110.05886586,
         100.18353335,  125.66187394],
       [ 129.13417226,   97.68091426,   55.67219343,   65.21816707,
          48.31767151,   43.21992128,   36.61321397,   23.82758208,
          21.97313198,  118.51751243,   17.46879484,   10.83287422,
          31.53319629,  112.4310806 ,   32.53500348,    0.        ,
           2.12006281,    3.10065855,    3.69503988,   50.82696057,
         142.57188501,   40.48912258,   57.31410464,   36.47362567,
          57.75568839,   60.32802375,   46.86397293,   46.46508683,
         115.96151438,   96.4609028 ,   83.26051223,  111.59600058,
          87.46876989,   88.46094895,  100.5943216 ,   93.38970678,
          98.32455502,  120.9074544 ],
       [ 131.15543491,   99.72842055,   57.73329398,   67.33703421,
          50.35982423,   45.33822935,   38.72523139,   25.94714561,
          24.093063  ,  120.15397222,   17.60959443,   11.60407078,
          33.32649576,  113.97649861,   34.24128482,    2.12006281,
           0.        ,    1.31445385,    1.85325248,   51.85067482,
         143.84465109,   41.02807795,   58.08232726,   36.61150631,
          58.30498224,   60.81963894,   44.90986141,   45.3850169 ,
         116.53496823,   96.52915648,   81.37113947,  111.48504301,
          85.90089209,   86.83661579,   99.90929844,   91.55839497,
          97.23955429,  119.60417795],
       [ 131.6121531 ,  100.24109796,   58.75750201,   68.11040323,
          51.41211677,   46.10857045,   39.62243859,   26.74616155,
          24.92548886,  120.12285122,   18.75702829,   12.89607245,
          33.49473823,  113.86141183,   34.31559023,    3.10065855,
           1.31445385,    0.        ,    0.59494891,   51.35960494,
         143.50376566,   40.26284873,   57.43049325,   35.65935289,
          57.53297354,   60.01684939,   43.76687856,   44.08373812,
         115.76125388,   95.52532767,   80.18376558,  110.41124233,
          84.60565886,   85.55171348,   98.66895505,   90.3403876 ,
          95.93571274,  118.2897246 ],
       [ 132.07326204,  100.71953764,   59.34630557,   68.65688951,
          52.00357068,   46.65546451,   40.19430593,   27.30128313,
          25.48741975,  120.41316509,   19.07611386,   13.35614357,
          33.86907914,  114.11817883,   34.65573069,    3.69503988,
           1.85325248,    0.59494891,    0.        ,   51.45467503,
         143.66239276,   40.21826688,   57.44359613,   35.50431594,
          57.48093742,   59.94703064,   43.17193077,   43.6188195 ,
         115.70398585,   95.32926312,   79.590684  ,  110.16627944,
          84.04770142,   84.98563722,   98.28427339,   89.75110096,
          95.46415114,  117.77525681],
       [  99.45133387,   73.14113302,   65.65311774,   59.52503559,
          62.47988599,   47.32874276,   49.87796523,   44.40779827,
          45.2380443 ,   74.08395134,   66.73746517,   59.09782513,
          27.78473315,   66.27123447,   25.2271242 ,   50.82696057,
          51.85067482,   51.35960494,   51.45467503,    0.        ,
          92.65395163,   15.45582747,    9.63710045,   23.97003905,
          14.77097366,   17.6204082 ,   72.37229228,   48.49225883,
          67.29245728,   55.87065723,   98.44253738,   73.15473118,
          89.90002448,   92.6440841 ,   75.90727609,  104.68109683,
          84.40960209,  110.60899441],
       [  84.35213741,   89.41330995,  131.47256659,  114.01992664,
         133.43405849,  120.20178016,  127.37651101,  129.32623646,
         130.90783135,   39.14428118,  156.89261175,  149.3785005 ,
         113.50100279,   37.19417729,  111.64690274,  142.57188501,
         143.84465109,  143.50376566,  143.66239276,   92.65395163,
           0.        ,  106.58468685,   89.02388967,  114.3873204 ,
          91.94018918,   90.91923732,  160.655393  ,  132.62524068,
          54.59028734,   84.81552022,  177.04212505,   91.86097424,
         160.24865723,  163.81307441,  119.98335955,  179.22467827,
         139.39507601,  161.09913984],
       [ 113.71757942,   86.07889099,   69.13295113,   67.1177613 ,
          64.4496592 ,   50.61690344,   50.59436298,   41.4902106 ,
          41.63726543,   89.51371453,   57.61347077,   50.20381172,
          27.93874453,   81.59237767,   25.62689902,   40.48912258,
          41.02807795,   40.26284873,   40.21826688,   15.45582747,
         106.58468685,    0.        ,   17.81777838,    8.51461272,
          17.27731151,   19.85245194,   56.9196245 ,   33.75805725,
          75.50690013,   57.49248427,   83.74533263,   73.77668293,
          76.83842302,   79.3393021 ,   70.02862218,   90.52543725,
          75.08213081,  100.88483617],
       [ 104.18521644,   79.57048045,   75.27209086,   68.64106641,
          72.10955557,   56.96552439,   59.41637193,   53.37631332,
          54.0660725 ,   74.5561186 ,   73.92151955,   66.34047296,
          37.05811805,   66.02170318,   34.48125989,   57.31410464,
          58.08232726,   57.43049325,   57.44359613,    9.63710045,
          89.02388967,   17.81777838,    0.        ,   25.36343219,
           6.29610346,    8.57630465,   72.72367707,   46.54200834,
          59.08926352,   46.23506611,   95.68632317,   63.51929239,
          85.13662189,   88.09745894,   67.30603411,  101.04084543,
          77.12209883,  103.3460439 ],
       [ 121.73505504,   93.5805984 ,   72.49307887,   72.45573799,
          67.14484592,   54.34421893,   53.04462313,   42.37937089,
          42.11871642,   98.01194517,   53.93195165,   46.88400524,
          31.54202507,   90.04082724,   29.61436246,   36.47362567,
          36.61150631,   35.65935289,   35.50431594,   23.97003905,
         114.3873204 ,    8.51461272,   25.36343219,    0.        ,
          23.3235987 ,   25.31415474,   48.41110481,   25.95383965,
          80.86510876,   59.99377426,   75.74019075,   75.38164247,
          69.9956611 ,   72.31432389,   67.98301199,   82.87776047,
          70.77352783,   96.08358813],
       [ 110.32553571,   85.86642849,   80.07486025,   74.28181412,
          76.52776463,   61.60233678,   63.43718519,   56.36628867,
          56.86088176,   79.58710969,   74.80504039,   67.3395152 ,
          40.68523271,   70.8116644 ,   38.11729588,   57.75568839,
          58.30498224,   57.53297354,   57.48093742,   14.77097366,
          91.94018918,   17.27731151,    6.29610346,   23.3235987 ,
           0.        ,    3.03971469,   68.91690376,   41.83619539,
          58.23050509,   42.12392055,   90.34966983,   59.1483019 ,
          79.1749445 ,   82.18874882,   61.29498303,   95.38263146,
          70.82990209,   97.05522787],
       [ 111.77223801,   87.8410854 ,   83.0601804 ,   77.05619596,
          79.55072274,   64.60382889,   66.47550109,   59.37106569,
          59.84850003,   79.88623824,   77.46078555,   70.02957127,
          43.72427758,   70.94834831,   41.15666683,   60.32802375,
          60.81963894,   60.01684939,   59.94703064,   17.6204082 ,
          90.91923732,   19.85245194,    8.57630465,   25.31415474,
           3.03971469,    0.        ,   69.75133458,   42.17255211,
          55.77904807,   39.08741746,   90.02753342,   56.10995886,
          78.15442381,   81.24055741,   58.73061347,   94.72942915,
          68.82328752,   95.02577569],
       [ 167.75441325,  137.8427446 ,  102.25529934,  109.64590354,
          95.03338702,   88.00263316,   82.5552698 ,   69.35665621,
          67.77419863,  146.41764562,   55.9650401 ,   54.27441049,
          69.72824286,  138.35692476,   69.19589554,   46.86397293,
          44.90986141,   43.76687856,   43.17193077,   72.37229228,
         160.655393  ,   56.9196245 ,   72.72367707,   48.41110481,
          68.91690376,   69.75133458,    0.        ,   28.78720578,
         119.56321457,   90.81016406,   36.70149208,  100.43951397,
          46.04548545,   45.85298469,   77.70944747,   47.34740587,
          66.66031586,   83.29287652],
       [ 147.47559338,  119.53439991,   94.61516916,   97.08086451,
          88.39277321,   77.43933692,   74.4456678 ,   62.04271827,
          61.12930162,  121.0965628 ,   62.04494672,   56.97480632,
          55.47233977,  112.52059513,   53.99105616,   46.46508683,
          45.3850169 ,   44.08373812,   43.6188195 ,   48.49225883,
         132.62524068,   33.75805725,   46.54200834,   25.95383965,
          41.83619539,   42.17255211,   28.78720578,    0.        ,
          90.82645295,   62.79760656,   50.00895415,   73.98810241,
          44.85683782,   46.87660232,   56.08716402,   56.92431269,
          51.86211721,   74.93648312],
       [ 117.71714759,  107.37607552,  127.40654391,  115.07003684,
         126.18753845,  110.84998219,  115.34732739,  111.56349863,
         112.4815114 ,   70.56652697,  132.87461079,  125.33671444,
          94.70652933,   61.58705097,   92.21713012,  115.96151438,
         116.53496823,  115.76125388,  115.70398585,   67.29245728,
          54.59028734,   75.50690013,   59.08926352,   80.86510876,
          58.23050509,   55.77904807,  119.56321457,   90.82645295,
           0.        ,   32.28460738,  128.62289133,   37.28339948,
         109.53846509,  113.18517959,   66.06942491,  129.06919825,
          86.13014827,  106.73722538],
       [ 133.79900032,  116.28420198,  121.42282543,  113.40975548,
         118.34050307,  103.19137716,  105.48927007,   98.34038647,
          98.72706523,   91.35127881,  113.92421925,  106.84679108,
          82.80390537,   81.63919051,   80.23300041,   96.4609028 ,
          96.52915648,   95.52532767,   95.32926312,   55.87065723,
          84.81552022,   57.49248427,   46.23506611,   59.99377426,
          42.12392055,   39.08741746,   90.81016406,   62.79760656,
          32.28460738,    0.        ,   96.64080228,   17.41549064,
          77.25670798,   80.90473419,   35.53275682,   96.80506128,
          54.58323031,   77.04555068],
       [ 197.44677426,  169.09262088,  138.09499842,  143.94704773,
         131.04257889,  122.85336169,  118.08944795,  104.90612869,
         103.46250712,  169.89704376,   92.5069948 ,   90.9733208 ,
         102.76494006,  160.96537637,  101.75198575,   83.26051223,
          81.37113947,   80.18376558,   79.590684  ,   98.44253738,
         177.04212505,   83.74533263,   95.68632317,   75.74019075,
          90.34966983,   90.02753342,   36.70149208,   50.00895415,
         128.62289133,   96.64080228,    0.        ,  100.20550166,
          22.95217791,   19.97150409,   70.62378685,   11.31719336,
          52.16256547,   57.50937187],
       [ 148.58593968,  132.63441559,  138.76734543,  130.8055413 ,
         135.57497646,  120.48246491,  122.58543772,  115.02078697,
         115.31127062,  104.18804109,  129.04124298,  122.18901147,
          99.80215793,   94.63001086,   97.24224624,  111.59600058,
         111.48504301,  110.41124233,  110.16627944,   73.15473118,
          91.86097424,   73.77668293,   63.51929239,   75.38164247,
          59.1483019 ,   56.10995886,  100.43951397,   73.98810241,
          37.28339948,   17.41549064,  100.20550166,    0.        ,
          78.79117072,   82.40716182,   31.2697723 ,   98.38602378,
          51.99615854,   70.06363157],
       [ 189.14944854,  162.7601394 ,  139.09017374,  141.91410736,
         132.61775134,  122.21588941,  118.85498883,  106.11462464,
         105.01040416,  157.19822672,  100.03977288,   96.82858971,
         100.3235751 ,  147.86933606,   98.80402823,   87.46876989,
          85.90089209,   84.60565886,   84.04770142,   89.90002448,
         160.24865723,   76.83842302,   85.13662189,   69.9956611 ,
          79.1749445 ,   78.15442381,   46.04548545,   44.85683782,
         109.53846509,   77.25670798,   22.95217791,   78.79117072,
           0.        ,    3.65662343,   48.37075999,   19.67040554,
          29.25853164,   37.79920507],
       [ 191.99095554,  165.35837769,  140.69971226,  143.94571444,
         134.13276468,  124.02300903,  120.45758352,  107.62069245,
         106.46404436,  160.46020936,  100.56096738,   97.60465622,
         102.32295325,  151.16099456,  100.86710442,   88.46094895,
          86.83661579,   85.55171348,   84.98563722,   92.6440841 ,
         163.81307441,   79.3393021 ,   88.09745894,   72.31432389,
          82.18874882,   81.24055741,   45.85298469,   46.87660232,
         113.18517959,   80.90473419,   19.97150409,   82.40716182,
           3.65662343,    0.        ,   51.90411867,   16.02048114,
          32.54040138,   39.11412815],
       [ 166.05420799,  145.29149536,  139.12212327,  135.31810846,
         134.44856291,  120.55921905,  120.50425374,  110.35549148,
         110.09405402,  125.94500799,  117.24257057,  111.4116417 ,
          97.96736316,  116.21524863,   95.63790049,  100.5943216 ,
          99.90929844,   98.66895505,   98.28427339,   75.90727609,
         119.98335955,   70.02862218,   67.30603411,   67.98301199,
          61.29498303,   58.73061347,   77.70944747,   56.08716402,
          66.06942491,   35.53275682,   70.62378685,   31.2697723 ,
          48.37075999,   51.90411867,    0.        ,   67.71748184,
          20.72651098,   41.53109055],
       [ 204.0887048 ,  176.45743266,  147.68288928,  152.70517971,
         140.75702041,  131.95482044,  127.55630618,  114.43461805,
         113.0711412 ,  174.46488832,  103.30249541,  101.47573441,
         111.23849364,  165.31073918,  110.05886586,   93.38970678,
          91.55839497,   90.3403876 ,   89.75110096,  104.68109683,
         179.22467827,   90.52543725,  101.04084543,   82.87776047,
          95.38263146,   94.72942915,   47.34740587,   56.92431269,
         129.06919825,   96.80506128,   11.31719336,   98.38602378,
          19.67040554,   16.02048114,   67.71748184,    0.        ,
          47.85168937,   48.62211181],
       [ 179.77386272,  156.65956475,  143.26004683,  142.15754477,
         137.75776952,  125.08604574,  123.63581541,  112.15820868,
         111.53127784,  142.38579851,  113.6588579 ,  108.81899233,
         102.23881742,  132.7185704 ,  100.18353335,   98.32455502,
          97.23955429,   95.93571274,   95.46415114,   84.40960209,
         139.39507601,   75.08213081,   77.12209883,   70.77352783,
          70.82990209,   68.82328752,   66.66031586,   51.86211721,
          86.13014827,   54.58323031,   52.16256547,   51.99615854,
          29.25853164,   32.54040138,   20.72651098,   47.85168937,
           0.        ,   26.22933623],
       [ 205.65378412,  182.86683277,  168.35907107,  168.00204059,
         162.58817289,  150.40263725,  148.49109442,  136.58876053,
         135.81297239,  167.11610006,  135.10408137,  131.00533255,
         127.62561148,  157.40000951,  125.66187394,  120.9074544 ,
         119.60417795,  118.2897246 ,  117.77525681,  110.60899441,
         161.09913984,  100.88483617,  103.3460439 ,   96.08358813,
          97.05522787,   95.02577569,   83.29287652,   74.93648312,
         106.73722538,   77.04555068,   57.50937187,   70.06363157,
          37.79920507,   39.11412815,   41.53109055,   48.62211181,
          26.22933623,    0.        ]]
          
  def Distance(self, from_node, to_node):
    return self.matrix[from_node][to_node]

def main():

  # Cities
  city_names = ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10",
                "11", "12", "13", "14", "15", "16", "17", "18", "19", "20",
                "21", "22", "23", "24", "25", "26", "27", "28", "29", "30",
                "31", "32","33", "34", "35", "36", "37", "38"]
  tsp_size = len(city_names)

  # Create routing model
  if tsp_size > 0:
    # TSP of size tsp_size
    # Second argument = 1 to build a single tour (it's a TSP).
    # Nodes are indexed from 0 to tsp_size - 1. By default the start of
    # the route is node 0.
    routing = pywrapcp.RoutingModel(tsp_size, 1, 1) #change third argument based in starting point for depot
    search_parameters = pywrapcp.RoutingModel.DefaultSearchParameters()

    # Setting first solution heuristic: the
    # method for finding a first solution to the problem.
    search_parameters.first_solution_strategy = (
        routing_enums_pb2.FirstSolutionStrategy.PATH_CHEAPEST_ARC)

    # Create the distance callback, which takes two arguments (the from and to node indices)
    # and returns the distance between these nodes.

    dist_between_nodes = CreateDistanceCallback()
    dist_callback = dist_between_nodes.Distance
    routing.SetArcCostEvaluatorOfAllVehicles(dist_callback)
    # Solve, returns a solution if any.
    assignment = routing.SolveWithParameters(search_parameters)
    if assignment:
      # Solution cost.
      print("Total distance: " + str(assignment.ObjectiveValue()) + " km\n")
      # Inspect solution.
      # Only one route here; otherwise iterate from 0 to routing.vehicles() - 1
      route_number = 0
      index = routing.Start(route_number) # Index of the variable for the starting node.
      route = ''
      while not routing.IsEnd(index):
        # Convert variable indices to node indices in the displayed route.
        route += str(city_names[routing.IndexToNode(index)]) + ' -> '
        index = assignment.Value(routing.NextVar(index))
      route += str(city_names[routing.IndexToNode(index)])
      print ("Route:\n\n" + route)
    else:
      print ('No solution found.')
  else:
    print ('Specify an instance greater than 0.')

    if __name__ == '__main__':
        main()

main()
